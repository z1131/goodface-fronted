<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GOODFACE</title>
    <link rel="stylesheet" href="css/user.css?v=2">
    <link rel="stylesheet" href="css/modal.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>GOODFACE</h1>
        </header>

        <main>

            <div class="user-section" id="profileSection">
                <h2>用户信息</h2>
                <div class="profile-info" id="userInfo">
                    <div class="info-item">
                        <label>状态:</label>
                        <span id="loginStatus">未登录</span>
                    </div>
                    <div class="info-item">
                        <label>用户名:</label>
                        <span id="profileUsername">-</span>
                    </div>
                    <div class="info-item">
                        <label>邮箱:</label>
                        <span id="profileEmail">-</span>
                    </div>
                </div>
                
                <div class="profile-actions" id="profileActions" style="display: none;">
                    <button id="logoutBtn" class="btn btn-secondary">退出登录</button>
                    <button id="rechargeBtn" class="btn btn-primary">充值</button>
                </div>

                            <!-- 紧凑登录提示：仅一个“立即登录”按钮，点击后再显示登录窗口 -->
            <div id="loginPromptSection" class="login-prompt" aria-label="登录提示">
                <button id="showLoginBtn" class="btn btn-primary btn-compact" disabled style="background-color: #cccccc; cursor: not-allowed;">立即登录</button>
            </div>
                
                
                <div class="recharge-section" id="rechargeSection" style="display: none; margin-top: 2rem;">
                    <h3>账户充值</h3>
                    <div class="recharge-options">
                        <div class="recharge-option" data-amount="10">
                            <span>¥10</span>
                        </div>
                        <div class="recharge-option" data-amount="30">
                            <span>¥30</span>
                        </div>
                        <div class="recharge-option" data-amount="50">
                            <span>¥50</span>
                        </div>
                        <div class="recharge-option" data-amount="100">
                            <span>¥100</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="customAmount">自定义金额</label>
                        <input type="number" id="customAmount" min="1" placeholder="输入充值金额">
                    </div>
                    <button id="confirmRecharge" class="btn btn-primary">确认充值</button>
                </div>
            </div>
        </main>

        <footer class="bottom-nav" role="navigation" aria-label="底部导航">
            <a href="config.html" class="nav-item" aria-label="面试配置">
                <span class="icon">📋</span>
                <span class="label">面试</span>
            </a>
            <a href="user.html" class="nav-item active" aria-label="用户中心">
                <span class="icon">👤</span>
                <span class="label">用户</span>
            </a>
        </footer>
    </div>
    
    <!-- 用户页登录模态（仅手机号登录，风格对齐 login 页） -->
    <div id="userLoginModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>用户登录</h2>
            <form id="uModalPhoneLoginForm" class="login-form phone-form" style="display:block;">
                <div class="form-group">
                    <label for="uModalPhone">手机号</label>
                    <input type="tel" id="uModalPhone" placeholder="请输入手机号" required>
                </div>
                <div class="form-group">
                    <label for="uModalCode">验证码</label>
                    <input type="text" id="uModalCode" placeholder="请输入6位验证码" required>
                </div>
                <div class="actions">
                    <button type="button" id="uModalSendCodeBtn" class="btn btn-secondary">发送验证码</button>
                    <button type="submit" class="btn btn-primary">登录</button>
                </div>
                <p style="margin-top:8px; font-size:12px; color:#657786; display:none;">开发模式：验证码已生成并显示在弹窗提示中。</p>
            </form>
        </div>
    </div>

    <script src="js/user.js"></script>
    <script>
      // 简单兜底：确保用户页登录按钮存在时可打开模态
      document.addEventListener('DOMContentLoaded', function(){
        var btn = document.getElementById('showLoginBtn');
        var modal = document.getElementById('userLoginModal');
        if(btn && modal){
          btn.addEventListener('click', function(){ modal.style.display = 'block'; });
          modal.addEventListener('click', function(e){ if(e.target === modal) modal.style.display = 'none'; });
          var closeEls = modal.querySelectorAll('.close');
          closeEls.forEach(function(el){ el.addEventListener('click', function(){ modal.style.display = 'none'; }); });
        }
        var sendBtn = document.getElementById('uModalSendCodeBtn');
        if(sendBtn){
          sendBtn.addEventListener('click', function(){
            var countdown = 60; var btn = sendBtn; btn.disabled = true; btn.textContent = countdown + '秒后重发';
            var timer = setInterval(function(){ countdown--; btn.textContent = countdown + '秒后重发'; if(countdown<=0){ clearInterval(timer); btn.disabled=false; btn.textContent='发送验证码'; } },1000);
          });
        }
      });
    </script>
</body>
</html>